<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sound Safari Game</title>
  <style>
    body {
      font-family: sans-serif;
      background-color: #f0f8ff;
      text-align: center;
      padding: 30px;
    }
    h1 {
      font-size: 3em;
      margin-bottom: 20px;
    }
    .menu-button {
      background: #ffefd5;
      border: 3px solid #ccc;
      border-radius: 15px;
      padding: 20px;
      margin: 15px;
      cursor: pointer;
      font-size: 1.5em;
      transition: 0.2s;
    }
    .menu-button:hover {
      background: #ffe4b5;
    }
    .score {
      font-size: 1.5em;
      margin-bottom: 10px;
    }
    .stars {
      display: flex;
      justify-content: center;
      margin-bottom: 10px;
    }
    .star {
      font-size: 2em;
      margin: 0 5px;
    }
    #prompt {
      font-size: 2em;
      margin-bottom: 20px;
    }
    .blend-box {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 15px;
      margin-bottom: 20px;
    }
    .letter {
      background: #ffefd5;
      border: 3px solid #ccc;
      border-radius: 15px;
      width: 70px;
      height: 70px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 2em;
      transition: 0.2s;
    }
    .letter.selected {
      background-color: #b6d7a8;
    }
    .letter:hover,
    .word-choice:hover {
      background: #ffe4b5;
    }
    .blended-word {
      font-size: 3em;
      font-weight: bold;
      margin: 20px 0;
      color: #333;
      letter-spacing: 0.1em;
    }
    .choices {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    .word-choice {
      background: #ffefd5;
      border: 3px solid #ccc;
      border-radius: 15px;
      padding: 30px;
      cursor: pointer;
      font-size: 2em;
      transition: 0.2s;
    }
    .reset-button {
      background: #ffefd5;
      border: 3px solid #ccc;
      border-radius: 15px;
      padding: 15px 25px;
      cursor: pointer;
      font-size: 1.5em;
      transition: 0.2s;
      margin-bottom: 20px;
    }
    .reset-button:hover {
      background: #ffe4b5;
    }
    .feedback {
      font-size: 2em;
      margin-top: 30px;
      font-weight: bold;
    }
    .emoji {
      font-size: 1.5em;
      margin-left: 0.2em;
    }
    .play-again {
      background: #93c47d;
      color: white;
      border: none;
      border-radius: 15px;
      padding: 20px 30px;
      font-size: 1.2em;
      margin-top: 30px;
      cursor: pointer;
    }
    .play-again:hover {
      background: #6aa84f;
    }
  </style>
</head>
<body>
  <h1>ü¶Å Sound Safari</h1>
  <div>
    <button class="menu-button" onclick="startGame('letters')">üß© Learn Phase¬†2 Sounds</button>
    <button class="menu-button" onclick="startGame('words')">üî§ Blend SATPIN¬†Words</button>
  </div>
  <div class="score" id="score">Score: 0</div>
  <div class="stars" id="stars"></div>
  <h2 id="prompt">Choose an activity to begin</h2>
  <div class="blend-box" id="blendBox"></div>
  <div class="blended-word" id="blendText"></div>
  <div class="choices" id="wordChoices"></div>
  <button class="reset-button" onclick="resetBlend()">üîÑ Reset Blending</button>
  <div class="feedback" id="feedback"></div>
  <div id="gameComplete" style="display:none;">
    <h2>üèÜ Game Complete! Well done!</h2>
    <button class="play-again" onclick="startGame('words')">Play Again</button>
  </div>

  <script>
    const phase2Letters = ['s','a','t','p','i','n','m','d','g','o','c','k','ck','e','u','r','h','b','f','ff','l','ll','ss'];
    const satpinWordsList = [
      { word:'sat', emoji:'ü™ë' },{ word:'pin', emoji:'üìå' },{ word:'pat', emoji:'üëè' },{ word:'tap', emoji:'üö∞' },
      { word:'nap', emoji:'üò¥' },{ word:'sip', emoji:'ü•§' },{ word:'tip', emoji:'üí°' },{ word:'tan', emoji:'üåû' },
      { word:'pit', emoji:'üï≥Ô∏è' },{ word:'pan', emoji:'üç≥' }
    ];
    let score = 0, stars = 0, blended = '', correctWord = '', correctEmoji = '', usedWords = [], satpinWords = [];

    function startGame(mode) {
      document.getElementById('gameComplete').style.display = 'none';
      document.getElementById('feedback').textContent = '';
      document.getElementById('blendText').textContent = '';
      score = 0; stars = 0; blended = '';
      updateScore(); updateStars();
      usedWords = [];
      satpinWords = [...satpinWordsList];
      document.getElementById('prompt').textContent =
        mode === 'letters' ? 'Tap Phase¬†2 sounds!' : 'Blend the sounds and click the correct word';
      showNewChallenge(mode);
    }

    function updateScore() {
      document.getElementById('score').textContent = 'Score: ' + score;
    }

    function updateStars() {
      const starBox = document.getElementById('stars');
      starBox.innerHTML = Array(stars).fill('‚≠ê').map(s => `<span class="star">${s}</span>`).join('');
    }

    function showNewChallenge(mode) {
      blended = '';
      document.getElementById('blendText').textContent = '';
      document.getElementById('blendBox').innerHTML = '';
      document.getElementById('wordChoices').innerHTML = '';
      document.getElementById('feedback').textContent = '';
      document.getElementById('gameComplete').style.display = 'none';

      if (mode === 'letters') {
        phase2Letters.forEach(letter => {
          const btn = document.createElement('div');
          btn.className = 'letter';
          btn.textContent = letter;
          btn.onclick = () => btn.classList.toggle('selected');
          document.getElementById('blendBox').appendChild(btn);
        });
      } else {
        if (satpinWords.length === 0) {
          document.getElementById('gameComplete').style.display = 'block';
          document.getElementById('blendBox').innerHTML = '';
          document.getElementById('wordChoices').innerHTML = '';
          document.getElementById('blendText').textContent = '';
          document.getElementById('feedback').textContent = '';
          document.getElementById('prompt').textContent = 'You blended all SATPIN words!';
          return;
        }
        const idx = Math.floor(Math.random() * satpinWords.length);
        const choice = satpinWords.splice(idx,1)[0];
        correctWord = choice.word;
        correctEmoji = choice.emoji;
        usedWords.push(choice.word);

        correctWord.split('').forEach(l => {
          const span = document.createElement('div');
          span.className = 'letter';
          span.textContent = l;
          span.onclick = () => {
            blended += l;
            document.getElementById('blendText').textContent = blended;
          };
          document.getElementById('blendBox').appendChild(span);
        });

        let opts = [{word: correctWord, emoji: correctEmoji}];
        let distractors = satpinWordsList.filter(
          w => w.word !== correctWord && !usedWords.includes(w.word)
        );
        while (opts.length < 3 && distractors.length) {
          const d = distractors.splice(Math.floor(Math.random() * distractors.length),1)[0];
          opts.push(d);
        }
        if (opts.length < 3) {
          let unused = satpinWordsList.filter(
            w => w.word !== correctWord && usedWords.includes(w.word)
          );
          while (opts.length < 3 && unused.length) {
            opts.push(unused.shift());
          }
        }
        opts.sort(() => 0.5 - Math.random());
        opts.forEach(o => {
          const btn = document.createElement('div');
          btn.className = 'word-choice';
          btn.innerHTML = o.word + ' <span class="emoji">' + o.emoji + '</span>';
          btn.onclick = () => handleChoice(o.word);
          document.getElementById('wordChoices').appendChild(btn);
        });
      }
    }

    function handleChoice(selection) {
      const fb = document.getElementById('feedback');
      if (selection === correctWord) {
        score++;
        if (score % 2 === 0) stars++;
        updateScore(); updateStars();
        fb.textContent = 'üéâ Correct! ' + correctEmoji;
        setTimeout(() => {
          showNewChallenge('words');
        }, 1000);
        if (stars === 5) {
          document.getElementById('gameComplete').style.display = 'block';
          document.getElementById('prompt').textContent = 'You blended all SATPIN words!';
        }
      } else {
        fb.textContent = '‚ùå Try again!';
      }
    }

    function resetBlend() {
      showNewChallenge('words');
    }

    startGame('letters');
  </script>
</body>
</html>
